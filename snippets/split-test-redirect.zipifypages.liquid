{%- comment -%}
  Updated: 05/26/2022
  This file is system-generated and should not be modified
  We reserve the right to overwrite it at any moment to add improvements or new features so that customizations you made might be lost
{%- endcomment -%}
{% assign zp_template_suffix = template.suffix %}{% if zp_template_suffix contains 'zipifypages' %}{% assign zp_entity_marker = template.name %}{% if zp_entity_marker == 'article' %}{% assign zp_current_entity = article %}{% elsif zp_entity_marker == 'blog' %}{% assign zp_current_entity = blog %}{% elsif zp_entity_marker == 'page' %}{% assign zp_current_entity = page %}{% elsif zp_entity_marker == 'product' %}{% assign zp_current_entity = product %}{% else %}{% assign zp_current_entity = nil %}{% endif %}{% if zp_current_entity != blank %}{% assign zp_current_entity_metafields = zp_current_entity.metafields['zipifypages'] %}{% if zp_current_entity_metafields['splittest'] != blank and zp_current_entity_metafields['splittest'].type == 'json' %}{% assign zp_split_test_data = zp_current_entity_metafields['splittest'].value %}{% assign zp_split_test_type = zp_split_test_data.type %}{% if zp_split_test_type == 'redirect' or zp_split_test_type == 'viewtyperedirect' %}{% assign zp_alternative_entity_handle = '' | append: zp_split_test_data.alternative_handle %}{% assign zp_split_dataset = zp_split_test_data.dataset | json %}{% assign zp_split_dataset = '' | append: zp_split_dataset %}{% assign zp_split_data_string = '{' %}{% assign zp_replacement_value = zp_entity_marker | json %}{% assign zp_split_data_string = zp_split_data_string | append: 'entityMarker:' | append: zp_replacement_value %}{% assign zp_replacement_value = zp_split_test_data.token | json %}{% assign zp_split_data_string = zp_split_data_string | append: ',testToken:' | append: zp_replacement_value %}{% assign zp_replacement_value = zp_split_test_type | json %}{% assign zp_split_data_string = zp_split_data_string | append: ',testType:' | append: zp_replacement_value %}{% assign zp_replacement_value = zp_current_entity.handle | json %}{% assign zp_split_data_string = zp_split_data_string | append: ',handles:{main:' | append: zp_replacement_value %}{% assign zp_view_type_url_param_name = 'view' %}{% if zp_split_test_type == 'viewtyperedirect' %}{% assign zp_replacement_value = zp_current_entity.handle | append: '?' | append: zp_view_type_url_param_name | append: '=' | append: zp_split_test_data.view_type | json %}{% else %}{% assign zp_replacement_value = zp_alternative_entity_handle | json %}{% endif %}{% assign zp_split_data_string = zp_split_data_string | append: ',alternative:' | append: zp_replacement_value %}{% assign zp_replacement_value = zp_split_dataset | json %}{% assign zp_split_data_string = zp_split_data_string | append: '},dataSet:' | append: zp_replacement_value %}{% if zp_split_test_type == 'viewtyperedirect' %}{% assign zp_replacement_value = zp_split_test_data.view_type | json %}{% assign zp_split_data_string = zp_split_data_string | append: ',viewType:' | append: zp_replacement_value %}{% endif %}{% assign zp_replacement_value = routes.root_url | json %}{% assign zp_split_data_string = zp_split_data_string | append: ',locale:{root:' | append: zp_replacement_value | append: '}}' %}{% assign zp_replacement_value = nil %}{% assign zp_split_dataset = nil %}<script>!function(t){function e(t){this.defaultVariation="a";try{this.data=JSON.parse(t)}catch(t){this.data=null}}function r(){}function i(){this.storage=new r}function n(t,e){this.mainState="main",this.scopes={"article":"articles","blog":"blogs","page":"pages","product":"products"},this.testToken=""+e,this.entityType=""+t,this.availableStates={a:"main",b:"alternative"},this.stateStorage=new i,this.state=this.getStoredState()}function a(t){this.localeData=t}function p(t){this.locale=new a(t)}function s(t,e,r,i,n,a,s,o,h){this.state=t,this.scope=e,this.handles=i,this.titles=n,this.styles=a,this.wrapperClasses=s,this.fonts=o,this.analyticsSettings=h,this.route=new p(r)}function o(){}e.prototype.selectVariation=function(){if(!this.data)return this.defaultVariation;try{var t,e=[];for(s in this.data)this.data.hasOwnProperty(s)&&(t=parseFloat(this.data[s]),isNaN(t)||e.push([t,s]));if(1<e.length){for(var r,i,n=0,a=null,s=0,o=e.length;s<o;s++)n+=e[s][0];for(i=Math.random()*n,s=0,o=e.length;s<o;s++){if(i<=(r=e[s][0])){a=e[s][1];break}i-=r}return a||this.defaultVariation}return this.defaultVariation}catch(t){return console.error("selectVariation error",t),this.defaultVariation}},r.prototype.getItem=function(t){t=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},r.prototype.setItem=function(t,e,r){var i,n=(r=r||{}).expires;"number"==typeof n&&n&&((i=new Date).setTime(i.getTime()+1e3*n),n=r.expires=i),n&&n.toUTCString&&(r.expires=n.toUTCString());var a,s,o=t+"="+(e=encodeURIComponent(e));for(a in r)r.hasOwnProperty(a)&&(o+="; "+a,!0!==(s=r[a])&&(o+="="+s));document.cookie=o},r.prototype.removeItem=function(t){this.setItem(t,"",{expires:-1})},i.prototype.getItem=function(){return this.storage.getItem.apply(this.storage,arguments)},i.prototype.setItem=function(){this.storage.setItem.apply(this.storage,arguments)},n.prototype.getAvailableState=function(t){return this.availableStates[t]||this.mainState},n.prototype._getStoredKey=function(){return"zpCurrentState"+this.entityType+this.testToken},n.prototype.getState=function(){return this.state},n.prototype.setState=function(t){return this.state=t,this.stateStorage.setItem(this._getStoredKey(),this.state),this.state},n.prototype.setMainState=function(){return this.setState(this.mainState)},n.prototype.getStoredState=function(){return this.stateStorage.getItem(this._getStoredKey())},n.prototype.currentScope=function(){return this.scopes[this.entityType]},n.prototype.isMainState=function(){return this.getState()===this.mainState},n.prototype.getMainStateValue=function(){return this.mainState},a.prototype.rootPath=function(){return this.localeData.root},a.prototype.baseRootPath=function(){return"/"},a.prototype.isChanged=function(){return this.baseRootPath()!==this.rootPath()},p.prototype.getRequestPath=function(t){return this.locale.isChanged()?this.locale.rootPath()+t:t},s.prototype.setState=function(t){return this.state=t,this.state},s.prototype.entityHandle=function(){return this.handles[this.state]},s.prototype.entityTitle=function(){return this.titles[this.state]},s.prototype.entityStylesLink=function(){return this.styles[this.state]},s.prototype.entityWrapperClasses=function(){return this.wrapperClasses[this.state]},s.prototype.entityFontsSettings=function(){return this.fonts[this.state]},s.prototype.entityAnalyticsSettings=function(){return this.analyticsSettings[this.state]},s.prototype.entityPath=function(){if(this.scope&&this.entityHandle()){var t="/"+this.scope+"/"+this.entityHandle();return this.route.getRequestPath(t)}return null},s.prototype.entityUrl=function(){var t=this.entityPath();return t?"https://{{ shop.domain }}"+t:null},o.prototype.parseUrl=function(t){var e=(""+t).trim();if(!/^\//.test(e)&&!/^https?:\/\//.test(e))return{};e=document.createElement("a");return e.href=t,{protocol:e.protocol,host:e.host,hostname:e.hostname,port:e.port,pathname:e.pathname,hash:e.hash,search:e.search,origin:e.origin}},o.prototype.searchQueryParams=function(t){t=this.parseUrl(t);return t.search?(""+t.search).replace(/^\?+/,""):""},o.prototype.filterSearchParams=function(t,e){if(!(t&&e instanceof RegExp))return t;for(var r,i=this.splitSearchParams(t),n=[],a=0,s=i.length;a<s;a++)r=i[a],e.test(r)||n.push(r);return n.join("&")},o.prototype.splitSearchParams=function(t){return t?(""+(""+t).replace(/^\?+/,"")).split("&"):[]};var h=new n(t.entityMarker,t.testToken);h.getState()||(c=new e(t.dataSet).selectVariation(),c=h.getAvailableState(c),h.setState(c));var u=new o,c="";if(!h.isMainState()){if("viewtyperedirect"===t.testType){c=u.searchQueryParams(window.location.href).trim();if(new RegExp("\\b{{ zp_view_type_url_param_name }}="+t.viewType+"\\b").test(c))return}t=new s(h.getState(),h.currentScope(),t.locale,t.handles,{},{},{},{},{}).entityPath();if(0<c.length){for(var l,y=u.searchQueryParams(t).trim(),f=u.splitSearchParams(y),y=c,g=0,S=f.length;g<S;g++)(l=(""+f[g]).split("=")[0])&&l!==f[g]&&"undefined"!==l&&(l=new RegExp("^"+l+"="),y=u.filterSearchParams(y,l));c=0<f.length?"&":"?";t+=0<y.length?c+y:""}window.location.replace(t)}}({{ zp_split_data_string }});</script>{% assign zp_split_data_string = nil %}{% endif %}{% endif %}{% endif %}{% endif %}